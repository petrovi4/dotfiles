## install

Установка:

```sh
git clone https://github.com/petrovi4/dotfiles.git ~/.dotfiles
cd ~/.dotfiles
script/bootstrap
```

Для обновления периодически запускаем

```sh
bin/dot
```

## Описание

- Каждая папка - это настройка какого-то одного приложения/софта
- Файлы install.sh внутри каждой из папок будут выполняться при первом запуске и периодическом обновлении
- Файлы XXX.symlink будут прилинкованы как файлы ~/.XXX при установке dotfiles
- Файл system/bash_profile.symlink станет основным профилем bash
- Все файлы .sh будут подключаться как source внутри .bash_profile
- Нода ставится в скрипте nvm/install.sh, там же после этого ставятся глобальные npm пакеты (такие как spoof и др.)

### Как это работает:

#### Запускаем скрипт "script/bootstrap" в первый раз

- Настройка Гита: в методе "setup_gitconfig" скрипт спрашивает имя и мэйл пользователя, вставляет их в "git/gitconfig.local.symlink.example" и устанавливает результат как конфиг гита.
- Создание симлинков: в методе "install_symlinks" для всех файлов с расширением symlink во всех папках этих Dotfiles создаются симлинки в домашней папке пользователя
- Затем запускается скрипт bin/dot в котором описан сценарий периодического обновления софта и первичная инсталяция

#### Периодическое обновление софта и запуск в первый раз - скрипт "bin/dot"

- Если это мак: запускается скрипт "macos/set-defaults.sh" с установкой параметров Макоси, затем запускается "homebrew/install.sh" в котором, если Homebrew не установлен, он ставится. Это нужно сделать не в рамках последующих запусков скриптов install из каждой папки а именно здеь, потому что скрипты install из папок мы запускаем по алфавиту, и пока дойдём до Homebrew может понадобиться поставить что-то из еще не установленного Homebrew. В финале обновляем Homebrew
- Если это линукс: обновляем apt-get
- Достаем все скринты install из всех папок dotfiles и запускаем их последовательно

## Некоторые важные моменты

- Файл "system/bash*profile.symlink" на этапе создания симлинков (это делается в "script/bootstrap") становится основным файлом bash конфига, и каждый раз при инициализации новой bash сессии он находит все \*.sh файлы внутри папок dotfiles (кроме */install.sh) и включает их в себя с помощью source

p.s. Может быть имеет смысл перенести всё из скрипта script/bootstrap в bin/dot, пусть файлы линкуются каждый раз, ведь там есть механизм проверки существует ли уже линк и нужно ли его перезаписывать, а установка homebrew так же проходит через проверку наличия уже установленного его в системе
